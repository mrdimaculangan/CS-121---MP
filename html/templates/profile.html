<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Your Profile</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='style_profile.css') }}">
	<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,200&family=DM+Serif+Display&display=swap" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" 
integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" 
crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
</head>
<body>
	<div class="pfp">
		<img src="../static/iconexample.jpg" id="photo">
		<input type="file" id="file" style="display: none;">
		<label for="file" id="upload"><img src="../static/cam.jpg"></i></label>
	</div>
	<div class="un">
		<p> </p>
	</div>
	<div class="bi-o">
		<p> </p>
	</div>
	 <ul class="nav flex-column">
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="{{ url_for('profile') }}"><i class="bi bi-person"></i> Profile</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('address') }}"><i class="bi bi-house"></i> Address</a>
      </li>
   	  <li class="nav-item">
        <a class="nav-link" href="{{ url_for('shopping_cart') }}"><i class="bi bi-cart"></i> Shopping Cart</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('index') }}"><i class="bi bi-arrow-90deg-left"></i></i> Return to Home</a>
      </li>
    </ul>
    <div class="logo">
    	<img src="../static/logo.png">
    </div><br>
    <div class="main">
    	<h1> My Profile </h1>
    </div>
<form class="row g-3" id="profileForm" method="post" action="{{ url_for('update_profile') }}">
    <div class="row g-3 align-items-center1">
        <div class="col-auto">
            <label for="inputUsername" class="col-form-label">Username</label>
        </div>
        <div class="col-auto">
            <input type="text" id="inputUsername" name="inputUsername" class="form-control" aria-describedby="usernameInline" placeholder="Enter Username">
        </div>
        <div class="col-auto">
            <span id="displayUsername"></span>
        </div>
    </div>
    <div class="row g-3 align-items-center2">
        <div class="col-auto">
            <label for="inputName" class="col-form-label">Name</label>
        </div>
        <div class="col-auto">
            <input type="text" id="inputName" name="inputName" class="form-control" aria-describedby="nameInline" placeholder="Enter Name">
        </div>
        <div class="col-auto">
            <span id="displayName"></span>
        </div>
    </div>
    <div class="row g-3 align-items-center3">
        <div class="col-auto">
            <label for="inputEmail" class="col-form-label">Email</label>
        </div>
        <div class="col-auto">
            <input type="email" id="inputEmail" name="inputEmail" class="form-control" aria-describedby="emailInline" placeholder="Enter Email">
        </div>
        <div class="col-auto">
            <span id="displayEmail"></span>
        </div>
    </div>
    <div class="row g-3 align-items-center4">
        <div class="col-auto">
            <label for="inputphonenumber" class="col-form-label">Phone Number</label>
        </div>
        <div class="col-auto">
            <input type="text" id="inputphonenumber" name="inputphonenumber" class="form-control" aria-describedby="pnInline" placeholder="Enter Phone Number">
        </div>
        <div class="col-auto">
            <span id="displayPhone"></span>
        </div>
    </div>
<div class="row g-3 align-items-center5">
    <div class="col-auto">
    	<label for="inputbirthday" class="col-form-label1">Date of Birth</label>
    </div>
    <div class="col-auto">
    	<select class="month1" name="month1">
    		<option value="month">Month</option>
    		<option value="January">January</option>
    		<option value="February">February</option>
    		<option value="March">March</option>
    		<option value="April">April</option>
    		<option value="May">May</option>
    		<option value="June">June</option>
    		<option value="July">July</option>
    		<option value="August">August</option>
    		<option value="September">September</option>
    		<option value="October">October</option>
    		<option value="November">November</option>
    		<option value="December">December</option>
    	</select>
    </div>
     <div class="col-auto">
    	<select class="day" name='day'>
    		<option value="day">Day</option>
    		<option value="1">1</option>
    		<option value="2">2</option>
    		<option value="3">3</option>
    		<option value="4">4</option>
    		<option value="5">5</option>
    		<option value="6">6</option>
    		<option value="7">7</option>
    		<option value="8">8</option>
    		<option value="9">9</option>
    		<option value="10">10</option>
    		<option value="11">11</option>
    		<option value="12">12</option>
    		<option value="13">13</option>
    		<option value="14">14</option>
    		<option value="15">15</option>
    		<option value="16">16</option>
    		<option value="17">17</option>
    		<option value="18">18</option>
    		<option value="19">19</option>
    		<option value="20">20</option>
    		<option value="21">21</option>
    		<option value="22">22</option>
    		<option value="23">23</option>
    		<option value="24">24</option>
    		<option value="25">25</option>
    		<option value="26">26</option>
    		<option value="27">27</option>
    		<option value="28">28</option>
    		<option value="29">29</option>
    		<option value="30">30</option>
    		<option value="31">31</option>
    	</select>
    </div>
    <div class="col-auto">
    <input type="number" id="yr" name='yr' class="form-control" aria-describedby="yrInline" placeholder="Year">
  </div>
 <div class="col-auto">
        <span id="displayDateOfBirth"></span>
</div>
</div>
<div class="row g-3 align-items-center6">
        <div class="col-auto">
            <label for="inputbio" class="col-form-label">Bio</label>
            <div id="bioHelp" class="form-text">Max. of 25 characters.</div>
        </div>
        <div class="col-auto">
            <input type="text" id="inputbio" name="inputbio" class="form-control" aria-describedby="bioInline" maxlength="25" placeholder="Enter Bio">
        </div>
    </div>
    <div class="col-auto">
        <button type="submit" class="btn btn-primary mb-3">Save</button>
    </div>
    <div class="col-auto">
        <button type="button" class="btn btn-primary mb-31"><a href="{{ url_for('profile') }}">Cancel</a></button>
    </div>
</form>
  <div class='space'></div>
<script>

	document.getElementById('file').addEventListener('change', function() {
    const file = this.files[0];
    const photo = document.getElementById('photo');
    if (file) {
        const reader = new FileReader();
        reader.onload = function(event) {
            photo.src = event.target.result;
        };
        reader.readAsDataURL(file);
    }
    window.addEventListener('DOMContentLoaded', () => {
            const savedImage = localStorage.getItem('uploadedImage');
            const photo = document.getElementById('photo');
            if (savedImage) {
                photo.src = savedImage;
    }
});

    window.addEventListener('DOMContentLoaded', () => {
    const savedUsername = localStorage.getItem('savedUsername');
    const savedName = localStorage.getItem('savedName');
    const savedEmail = localStorage.getItem('savedEmail');
    const savedPhone = localStorage.getItem('savedPhone');
    const savedMonth = localStorage.getItem('savedMonth');
    const savedDay = localStorage.getItem('savedDay');
    const savedYear = localStorage.getItem('savedYear');
    const savedBio = localStorage.getItem('savedBio');

    if (savedUsername) {
        document.querySelector('.un p').textContent = savedUsername;
    }
    if (savedName) {
        document.getElementById('displayName').textContent = `Entered Name: ${savedName}`;
    }
    if (savedEmail) {
        document.getElementById('displayEmail').textContent = `Entered Email: ${savedEmail}`;
    }
    if (savedPhone) {
        document.getElementById('displayPhone').textContent = `Entered Phone Number: ${savedPhone}`;
    }
    if (savedMonth && savedDay && savedYear) {
        const dateOfBirth = `${savedMonth} ${savedDay}, ${savedYear}`;
        document.getElementById('displayDateOfBirth').textContent = `Entered Date of Birth: ${dateOfBirth}`;
    }
    if (savedBio) {
        document.querySelector('.bi-o p').textContent = savedBio;
    }
});

document.getElementById('profileForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const usernameInput = document.getElementById('inputUsername').value.trim();
    const nameInput = document.getElementById('inputName').value.trim();
    const emailInput = document.getElementById('inputEmail').value.trim();
    const phoneNumberInput = document.getElementById('inputphonenumber').value.trim();
    const monthInput = document.querySelector('.month1').value;
    const dayInput = document.querySelector('.day').value;
    const yearInput = document.getElementById('yr').value.trim();
    const bioInput = document.getElementById('inputbio').value.trim();


    const isValidDateOfBirth = monthInput !== 'month' && dayInput !== 'day' && yearInput;

 
    const savedMonth = localStorage.getItem('savedMonth');
    const savedDay = localStorage.getItem('savedDay');
    const savedYear = localStorage.getItem('savedYear');


    if (usernameInput) {
        localStorage.setItem('savedUsername', usernameInput);
        document.querySelector('.un p').textContent = usernameInput;
    }
    if (nameInput) {
        localStorage.setItem('savedName', nameInput);
        document.getElementById('displayName').textContent = `Entered Name: ${nameInput}`;
    }
    if (emailInput) {
        localStorage.setItem('savedEmail', emailInput);
        document.getElementById('displayEmail').textContent = `Entered Email: ${emailInput}`;
    }
    if (phoneNumberInput) {
        localStorage.setItem('savedPhone', phoneNumberInput);
        document.getElementById('displayPhone').textContent = `Entered Phone Number: ${phoneNumberInput}`;
    }

    if (isValidDateOfBirth) {
        localStorage.setItem('savedMonth', monthInput);
        localStorage.setItem('savedDay', dayInput);
        localStorage.setItem('savedYear', yearInput);
        const dateOfBirth = `${monthInput} ${dayInput}, ${yearInput}`;
        document.getElementById('displayDateOfBirth').textContent = `Entered Date of Birth: ${dateOfBirth}`;
    } else if (savedMonth && savedDay && savedYear) {
        const dateOfBirth = `${savedMonth} ${savedDay}, ${savedYear}`;
        document.getElementById('displayDateOfBirth').textContent = `Entered Date of Birth: ${dateOfBirth}`;
    }

    if (bioInput) {
        localStorage.setItem('savedBio', bioInput);
        document.querySelector('.bi-o p').textContent = bioInput;
    }
});



</script>
</body>
</html>